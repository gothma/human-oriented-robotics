function [x,P] = updatestate(xp,Pp,v,S,H)% Course Human-Oriented Robotics% Social Robotics Lab% University of Freiburg, Germany% Lecturer: Prof. Kai Arras% Lab Instructors: Timm Linder, Billy Okal, Luigi Palmieri% (c) SRL 2014% Author of this exercise: Billy Okal and Kai O. Arras% Compute Kalman gainK = Pp*H'*inv(S);% Update state and state covariancex = xp + K*v;P = Pp - K*H*Pp;